<% include ./partials/header.ejs %>
<div class="w-full min-h-screen bg-zinc-900 px-4 py-5">

  <h1 class="text-white mt-5">Notifications</h1>

  <div class="notifications">
    <% likedPosts.filter(post => post.user.toString() === user._id.toString()).forEach(function(post) { %>
      <% post.likes.forEach(function(like) { %>
        <% if (like._id.toString() !== user._id.toString() && like.username) { %>
          <a href="/profile/<%= like.username %>" class="outline-none">
            <div class="text-white flex items-center justify-between gap-2 mt-5">
              <div class="text-white items-center flex gap-4">
                <div class="image w-[11vw] h-[11vw] rounded-full bg-sky-100 overflow-hidden">
                  <img class="w-full h-full object-cover" src="/images/uploads/<%= like.profileImage %>" alt="">
                </div>
                <div class="text">
                  <h3><%= like.username %>, liked your post</h3>
                </div>
              </div>
              <div class="image w-[11vw] h-[11vw] bg-sky-100 overflow-hidden">
                <img class="w-full h-full object-cover" src="/images/uploads/<%= post.picture %>" alt="">
              </div>
            </div>
          </a>
        <% } %>
      <% }) %>
    <% }) %>
  </div>

</div>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"
  integrity="sha512-b94Z6431JyXY14iSXwgzeZurHHRNkLt9d6bAHt7BZT38eqV+GyngIi/tVye4jBKPYQ2lBdRs0glww4fmpuLRwA=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
></script>

<% include ./partials/footer.ejs %>
